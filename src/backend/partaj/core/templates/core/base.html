{% load i18n static %}

<!DOCTYPE html>
<html
  lang="fr-FR"
  class="{% block htmlrootclass %}{% endblock htmlrootclass %}"
>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <title>Partaj</title>

    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'css/styles.css' %}"
    />
    <!--
      Fix a nasty issue in Safari where it is impossible to make a table-row into a containing block. When we then stretch
      the links in our tables it breaks and covers the whole page. This safari only hack enables us to disable link-stretching
      in safari, and remove the pointer cursor.
      Users then have to click on the actual link in the row header.
    -->
    <style>
      @media not all and (min-resolution: 0.001dpcm) {
        @media {
          .stretched-link:after {
            display: none;
          }
        }
      }
    </style>

  </head>
  <body class="flex flex-col min-h-screen">
    <div id="app-root" class="flex flex-col min-h-screen">
      {% block content %}{% endblock content %}
    </div>
    <!-- Entypo pictograms by Daniel Bruce â€” www.entypo.com -->

    <script>
      window.__partaj_frontend_context__ = JSON.parse(
        '{{ FRONTEND_CONTEXT|safe }}',
      );
    </script>
    <script src="{% static 'js/index.js' %}"></script>

    <script type="text/javascript">
      /**
       * Third-party customer relationship tool.
       */
      if (
        window.__partaj_frontend_context__ &&
        window.__partaj_frontend_context__.crisp_website_id
      ) {
        window.$crisp = [];
        window.CRISP_WEBSITE_ID =
          window.__partaj_frontend_context__.crisp_website_id;
        (function () {
          d = document;
          s = d.createElement('script');
          s.src = 'https://client.crisp.chat/l.js';
          s.async = 1;
          d.getElementsByTagName('head')[0].appendChild(s);
        })();
      }
    </script>
    <script type="text/javascript">
        if (parseInt(window.__partaj_frontend_context__.tracking.enable_tracking)) {
          var _paq = _paq || [];
          //_paq.push(['setDocumentTitle','TIEPS' ]);
          _paq.push(['trackPageView']);
          _paq.push(['enableLinkTracking']);
          (
            function () {
              var u="//audience-sites.din.developpement-durable.gouv.fr/";
              _paq.push(['setTrackerUrl', u+'piwik.php']);
              _paq.push(['setSiteId',parseInt(window.__partaj_frontend_context__.tracking.tracker_id)]);
              var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
              g.type='text/javascript';
              g.async=true;
              g.defer=true;
              g.src=u+'piwik.js';
              s.parentNode.insertBefore(g,s);
            }
          )();
        }
    </script>

  </body>
</html>
