# Generated by Django 3.0.5 on 2022-01-14 09:28

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models

import django_fsm


class Migration(migrations.Migration):

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ("core", "0052_add_activity_types_multiple_referral_users"),
    ]

    operations = [
        migrations.AlterField(
            model_name="referral",
            name="assignees",
            field=models.ManyToManyField(
                blank=True,
                help_text="Partaj users that have been assigned to work on this referral",
                null=True,
                related_name="referrals_assigned",
                through="core.ReferralAssignment",
                to=settings.AUTH_USER_MODEL,
                verbose_name="assignees",
            ),
        ),
        migrations.AlterField(
            model_name="referral",
            name="context",
            field=models.TextField(
                blank=True,
                help_text="Explain the facts and context leading to the referral",
                null=True,
                verbose_name="context",
            ),
        ),
        migrations.AlterField(
            model_name="referral",
            name="object",
            field=models.CharField(
                blank=True,
                help_text="Brief sentence describing the object of the referral",
                max_length=60,
                null=True,
                verbose_name="object",
            ),
        ),
        migrations.AlterField(
            model_name="referral",
            name="prior_work",
            field=models.TextField(
                blank=True,
                help_text="What research did you already perform before the referral?",
                null=True,
                verbose_name="prior work",
            ),
        ),
        migrations.AlterField(
            model_name="referral",
            name="question",
            field=models.TextField(
                blank=True,
                help_text="Question for which you are requesting the referral",
                null=True,
                verbose_name="question",
            ),
        ),
        migrations.AlterField(
            model_name="referral",
            name="state",
            field=django_fsm.FSMField(
                choices=[
                    ("answered", "Answered"),
                    ("assigned", "Assigned"),
                    ("closed", "Closed"),
                    ("in_validation", "In validation"),
                    ("draft", "Draft"),
                    ("processing", "Processing"),
                    ("received", "Received"),
                ],
                default="draft",
                help_text="Current treatment status for this referral",
                max_length=50,
                verbose_name="referral state",
            ),
        ),
        migrations.AlterField(
            model_name="referral",
            name="topic",
            field=models.ForeignKey(
                blank=True,
                help_text="Broad topic to help direct the referral to the appropriate office",
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                to="core.Topic",
                verbose_name="topic",
            ),
        ),
        migrations.AlterField(
            model_name="referral",
            name="units",
            field=models.ManyToManyField(
                blank=True,
                help_text="Partaj units that have been assigned to this referral",
                null=True,
                related_name="referrals_assigned",
                through="core.ReferralUnitAssignment",
                to="core.Unit",
                verbose_name="units",
            ),
        ),
        migrations.AlterField(
            model_name="referral",
            name="urgency",
            field=models.CharField(
                blank=True,
                choices=[
                    ("u1", "Urgent — 1 week"),
                    ("u2", "Extremely urgent — 3 days"),
                    ("u3", "Absolute emergency — 24 hours"),
                ],
                help_text="Urgency level. When do you need the referral?",
                max_length=2,
                null=True,
                verbose_name="urgency",
            ),
        ),
        migrations.AlterField(
            model_name="referral",
            name="urgency_explanation",
            field=models.TextField(
                blank=True,
                help_text="Why is this referral urgent?",
                null=True,
                verbose_name="urgency explanation",
            ),
        ),
        migrations.AlterField(
            model_name="referral",
            name="users",
            field=models.ManyToManyField(
                blank=True,
                help_text="Users who are registered as requesters for this referral",
                null=True,
                related_name="referrals_requested",
                through="core.ReferralUserLink",
                to=settings.AUTH_USER_MODEL,
                verbose_name="users",
            ),
        ),
    ]
